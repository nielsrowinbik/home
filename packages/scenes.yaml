input_number:
  morning_threshold:
    icon: mdi:tune
    max: 10
    min: -10
    mode: box
    name: Activate Morning when elevation reaches
    step: 0.5
    unit_of_measurement: "°"
  day_threshold:
    icon: mdi:tune
    max: 10
    min: -10
    mode: box
    name: Activate Day when elevation reaches
    step: 0.5
    unit_of_measurement: "°"
  afternoon_threshold:
    icon: mdi:tune
    max: 10
    min: -10
    mode: box
    name: Activate Afternoon when elevation drops below
    step: 0.5
    unit_of_measurement: "°"
  early_evening_threshold:
    icon: mdi:tune
    max: 10
    min: -10
    mode: box
    name: Activate Early evening when elevation drops below
    step: 0.5
    unit_of_measurement: "°"
  evening_threshold:
    icon: mdi:tune
    max: 10
    min: -10
    mode: box
    name: Activate Evening when elevation drops below
    step: 0.5
    unit_of_measurement: "°"

script:
  scene_sync:
    alias: Sync scene to time of day
    sequence:
      - service: scene.turn_on
        data_template:
          entity_id: scene.{{ states('sensor.time_of_day') | lower | replace(' ', '_') }}
  scene_selection_reactivate:
    alias: Reactivate primary scene
    sequence:
      - service: scene.turn_on
        data_template:
          entity_id: scene.{{ states('input_select.primary_scene') | lower | replace(' ', '_') }}

input_select:
  presence:
    icon: mdi:home-circle
    name: Presence
    options:
      - Home
      - Away
      - Vacation
  primary_scene:
    icon: mdi:theme-light-dark
    name: Scene
    options:
      - Morning
      - Day
      - Afternoon
      - Early evening
      - Evening
      - Night
      - Away
      - Vacation
  secondary_scene:
    name: Activity
    options:
      - None
      - Cooking
      - Door open
      - Watching a movie

scene:
  - name: Home
    entities:
      input_select.presence:
        option: Home
      automation.set_home_mode_to_home: off
      automation.set_home_mode_to_away: on
      automation.set_home_mode_to_vacation: on
      automation.pause_media_through_harmony_remote: on
      automation.pause_music_through_harmony_remote: on
      automation.pause_music_when_turning_on_the_tv: on
      automation.play_media_through_harmony_remote: on
      automation.play_music_through_harmony_remote: on
      automation.reactivate_secondary_scene_upon_primary_scene_switch: on
      automation.trigger_morning_scene_at_fixed_time: on
      automation.turn_on_receiver_when_audio_starts_playing: on
      automation.turn_on_tv_when_media_starts_playing: on
      automation.turn_on_toilet_light: on

  - name: Away
    entities:
      input_select.presence:
        option: Away
      input_select.primary_scene:
        option: Away
      input_select.secondary_scene:
        option: None
      automation.set_home_mode_to_home: on
      automation.set_home_mode_to_away: off
      automation.set_home_mode_to_vacation: on
      automation.pause_media_through_harmony_remote: off
      automation.pause_music_through_harmony_remote: off
      automation.pause_music_when_turning_on_the_tv: off
      automation.play_media_through_harmony_remote: off
      automation.play_music_through_harmony_remote: off
      automation.reactivate_secondary_scene_upon_primary_scene_switch: off
      automation.trigger_morning_scene_at_fixed_time: off
      automation.turn_on_receiver_when_audio_starts_playing: off
      automation.turn_on_tv_when_media_starts_playing: off
      climate.living_room:
        temperature: 16
      light.kitchen_mood_lighting: off
      light.kitchen_worktop: off
      light.living_room_pendant: off
      media_player.kitchen_speakers: off
      media_player.living_room_tv: off
      media_player.upstairs: off
      remote.harmony_hub: off

  - name: Vacation
    entities:
      input_select.presence:
        option: Vacation
      input_select.primary_scene:
        option: Vacation
      input_select.secondary_scene:
        option: None
      automation.set_home_mode_to_home: on
      automation.set_home_mode_to_away: off
      automation.set_home_mode_to_vacation: off
      automation.pause_media_through_harmony_remote: off
      automation.pause_music_through_harmony_remote: off
      automation.pause_music_when_turning_on_the_tv: off
      automation.play_media_through_harmony_remote: off
      automation.play_music_through_harmony_remote: off
      automation.reactivate_secondary_scene_upon_primary_scene_switch: off
      automation.trigger_morning_scene_at_fixed_time: off
      automation.turn_on_receiver_when_audio_starts_playing: off
      automation.turn_on_tv_when_media_starts_playing: off
      climate.living_room:
        temperature: 16
      light.kitchen_mood_lighting: off
      light.kitchen_worktop: off
      light.living_room_pendant: off
      media_player.kitchen_speakers: off
      media_player.living_room_tv: off
      media_player.upstairs: off
      remote.harmony_hub: off

  - name: Morning
    entities:
      input_select.presence:
        option: Home
      input_select.primary_scene:
        option: Morning
      automation.synchronise_scene_to_time_of_day: on
      climate.living_room:
        temperature: 19
      light.kitchen_mood_lighting: off
      light.living_room_pendant: on

  - name: Day
    entities:
      input_select.presence:
        option: Home
      input_select.primary_scene:
        option: Day
      automation.synchronise_scene_to_time_of_day: on
      automation.turn_off_night_scene: off
      climate.living_room:
        temperature: 19
      light.kitchen_mood_lighting: off
      light.living_room_pendant: off

  - name: Afternoon
    entities:
      input_select.presence:
        option: Home
      input_select.primary_scene:
        option: Afternoon
      automation.synchronise_scene_to_time_of_day: on
      automation.turn_off_night_scene: off
      climate.living_room:
        temperature: 20
      light.kitchen_mood_lighting: on
      light.living_room_pendant: on

  - name: Early evening
    entities:
      input_select.presence:
        option: Home
      input_select.primary_scene:
        option: Early evening
      automation.synchronise_scene_to_time_of_day: on
      automation.turn_off_night_scene: off
      climate.living_room:
        temperature: 20
      light.kitchen_mood_lighting: on
      light.living_room_pendant: on

  - name: Evening
    entities:
      input_select.presence:
        option: Home
      input_select.primary_scene:
        option: Evening
      automation.synchronise_scene_to_time_of_day: on
      automation.turn_off_night_scene: off
      climate.living_room:
        temperature: 20
      light.kitchen_mood_lighting: on
      light.living_room_pendant: on

  - name: Night
    entities:
      input_select.presence:
        option: Home
      input_select.primary_scene:
        option: Night
      automation.synchronise_scene_to_time_of_day: off
      automation.turn_off_night_scene: on
      climate.living_room:
        temperature: 16
      light.kitchen_mood_lighting: off
      light.kitchen_worktop: off
      light.living_room_pendant: off

  - name: Cooking
    entities:
      input_select.presence:
        option: Home
      input_select.secondary_scene:
        option: Cooking
      light.kitchen_worktop: on

  - name: Watching a movie
    entities:
      input_select.presence:
        option: Home
      input_select.secondary_scene:
        option: Movie

  - name: Door open
    entities:
      input_select.presence:
        option: Home
      input_select.secondary_scene:
        option: Door open
      climate.living_room:
        temperature: 16
