automation:
  - alias: Pull new configuration from GitHub when Travis-CI build passes
    trigger:
      - platform: state
        entity_id: sensor.travis_ci_status
        from: "started"
        to: "passed"
    action:
      - service: script.turn_on
        entity_id: script.do_git_pull

script:
  do_git_pull:
    alias: Pull new configuration from GitHub
    sequence:
      - service: hassio.addon_start
        data:
          addon: core_git_pull

sensor:
  - platform: rest
    resource: https://api.travis-ci.org/repos/nielsrowinbik/home/builds
    headers:
      Accept: application/vnd.travis-ci.2+json
    value_template: "{{ value_json.builds[0].state }}"
    name: Travis-CI status
